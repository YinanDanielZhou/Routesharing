from tensorbay.geometry.polyline import Polyline2D

import numpy as np
import matplotlib.pyplot as plt

raw_data = []
# with open("Car/Car_samples/car_samples_data.txt", 'r') as fileIn:
#     # Iterate over each line in the file
#     for line in fileIn:
#         elements = line.split(",")
#         raw_data.append((elements[1], elements[2]))



raw_data = [('2009-01-06 00:15:12',40.0247,116.323,6.88976,69),
('2009-01-06 00:16:12',40.0258,116.322,4.58572,342),
('2009-01-06 00:17:12',40.0267,116.323,8.05297,75),
('2009-01-06 00:17:58',40.0265,116.326,10.357,99),
('2009-01-06 00:18:58',40.0265,116.329,3.44488,90),
('2009-01-06 00:19:58',40.0266,116.332,17.2468,90),
('2009-01-06 00:20:58',40.0274,116.336,12.6387,3),
('2009-01-06 00:23:59',40.0295,116.339,10.357,75),
('2009-01-06 00:26:59',40.0291,116.342,9.19381,153),
('2009-01-06 00:28:27',40.0263,116.344,17.2468,150),
('2009-01-06 00:28:29',40.0262,116.344,16.1059,150),
('2009-01-06 00:28:30',40.0262,116.344,14.9427,150),
('2009-01-06 00:29:00',40.0246,116.345,14.9427,147),
('2009-01-06 00:30:00',40.0201,116.348,35.6568,123),
('2009-01-06 00:31:00',40.0146,116.353,33.3527,147),
('2009-01-06 00:32:03',40.011,116.355,10.357,150),
('2009-01-06 00:33:03',40.0088,116.356,14.9427,204),
('2009-01-06 00:35:03',40.0044,116.36,12.6387,150),
('2009-01-06 00:36:03',40.0016,116.363,16.1059,150),
('2009-01-06 00:37:04',39.9966,116.366,29.9078,147),
('2009-01-06 00:38:04',39.9921,116.37,8.05297,147),
('2009-01-06 00:39:04',39.9871,116.372,40.2649,165),
('2009-01-06 00:40:04',39.9817,116.373,14.9427,165),
('2009-01-06 00:41:04',39.9792,116.374,9.19381,165),
('2009-01-06 00:42:07',39.9766,116.375,9.19381,168),
('2009-01-06 00:43:07',39.9734,116.375,10.357,183),
('2009-01-06 00:44:07',39.9698,116.374,26.463,183),
('2009-01-06 00:45:07',39.9615,116.374,36.82,183),
('2009-01-06 00:46:07',39.9529,116.373,5.74893,177),
('2009-01-06 00:47:08',39.9517,116.373,5.74893,177)]


x = np.array([element[1] for element in raw_data])
y = np.array([element[2] for element in raw_data])

polyline = np.stack((x,y), axis=-1)
polyline_reduced = polyline[::20]


x_reduced, y_reduced = np.hsplit(polyline_reduced, 2)

# # Dataset
# x = np.array([ 1,  2,  3,  4,  5,  6,  7, 8 ])
# y = np.array([ 20, 30, 5, 12, 39, 48, 50, 3 ])
 
# Plotting the Graph
plt.plot(x_reduced, y_reduced)
# plt.plot(x, y)
plt.title("Curve plotted using the given points")
plt.xlabel("X")
plt.ylabel("Y")
plt.show()

print( Polyline2D.similarity(polyline, polyline_reduced) )